{"version":3,"sources":["../../src/utils/get-image.js"],"names":["cacheImageResults","Map","getImage","url","has","preservePromiseMethods","get","axios","responseType","then","response","set","catch","error","result","Error","Promise","reject","resolve"],"mappings":";;;;;;;AAAA;;;;AAEA,IAAMA,iBAAiB,GAAG,IAAIC,GAAJ,EAA1B;;AAEe,SAASC,QAAT,CAAkBC,GAAlB,EAAuB;AACpC,MAAIH,iBAAiB,CAACI,GAAlB,CAAsBD,GAAtB,CAAJ,EAAgC;AAC9B,WAAOE,sBAAsB,CAACL,iBAAiB,CAACM,GAAlB,CAAsBH,GAAtB,CAAD,CAA7B;AACD;;AAED,SAAOI,eAAMD,GAAN,CAAUH,GAAV,EAAe;AAAEK,IAAAA,YAAY,EAAE;AAAhB,GAAf,EACJC,IADI,CACC,UAACC,QAAD,EAAc;AAClBV,IAAAA,iBAAiB,CAACW,GAAlB,CAAsBR,GAAtB,EAA2BO,QAA3B;AACA,WAAOA,QAAP;AACD,GAJI,EAKJE,KALI,CAKE,UAACC,KAAD,EAAW;AAChBb,IAAAA,iBAAiB,CAACW,GAAlB,CAAsBR,GAAtB,EAA2BU,KAA3B;AACA,WAAOA,KAAP;AACD,GARI,EASJJ,IATI,CASCJ,sBATD,CAAP;AAUD;;AAED,SAASA,sBAAT,CAAgCS,MAAhC,EAAwC;AACtC,MAAIA,MAAM,YAAYC,KAAtB,EAA6B;AAC3B,WAAOC,OAAO,CAACC,MAAR,CAAeH,MAAf,CAAP;AACD;;AAED,SAAOE,OAAO,CAACE,OAAR,CAAgBJ,MAAhB,CAAP;AACD","sourcesContent":["import axios from 'axios';\n\nconst cacheImageResults = new Map();\n\nexport default function getImage(url) {\n  if (cacheImageResults.has(url)) {\n    return preservePromiseMethods(cacheImageResults.get(url));\n  }\n\n  return axios.get(url, { responseType: 'arraybuffer' })\n    .then((response) => {\n      cacheImageResults.set(url, response);\n      return response;\n    })\n    .catch((error) => {\n      cacheImageResults.set(url, error);\n      return error;\n    })\n    .then(preservePromiseMethods);\n}\n\nfunction preservePromiseMethods(result) {\n  if (result instanceof Error) {\n    return Promise.reject(result);\n  }\n\n  return Promise.resolve(result);\n}\n"],"file":"get-image.js"}